import{_ as z,C as A}from"./CustomSnackbar-ef62ff4a.js";import{n as N,a as _,O as W,c as h,w as s,r as n,o as u,b as t,d as c,e as k,f,g as R,h as j,F as D,t as F}from"./app-ee36906e.js";const I={name:"Home",props:["permissions"],data(){return{history:[],snackbarColor:"success",showSnackbar:!1,historyOpened:!1,snackbarMessage:null,tokenMessage:null,uniqueLink:null}},components:{CustomSnackbar:A,Link:N},computed:{tokenMessageComputed:{get(){return this.token},set(e){this.tokenMessage=e}}},mounted(){this.getToken()},methods:{getToken(){_.post("/token/get-token").then(e=>{var o;this.uniqueLink=(o=e.data)==null?void 0:o.token}).catch(e=>{console.log(e.response)})},showHistory(){this.history=[],_.post("/show-history").then(e=>{var o;this.history=(o=e.data)==null?void 0:o.history,this.historyOpened===!1&&(this.historyOpened=!0),console.log(this.history)}).catch(e=>{console.log(e.response)})},regenerate(){_.post("/token/regenerate").then(e=>{var o,r;this.uniqueLink=(o=e.data)==null?void 0:o.token,this.snackbarColor="success",this.showSnackbarMessage((r=e.data)==null?void 0:r.message)}).catch(e=>{console.log(e.response)})},deactivate(){_.post("/token/deactivate").then(e=>{e.data.hasOwnProperty("redirect_to")&&W.visit(e.data.redirect_to)}).catch(e=>{console.log(e.response)})},feelingLucky(){_.post("/feeling-lucky").then(e=>{var o,r;this.snackbarColor=((o=e.data)==null?void 0:o.result_name)==="Win"?"success":"error",this.showSnackbarMessage((r=e.data)==null?void 0:r.message),e.data.message&&this.updateHistoryArray(e.data.message),console.log(this.$page.props.auth.user.name)}).catch(e=>{console.log(e.response)})},updateHistoryArray(e){this.history.length===3&&this.history.pop();let o=e.includes("win")?"Win":"Lose";this.history.unshift({message:e,game_result:o})},showSnackbarMessage(e){this.showSnackbar=!1,this.snackbarMessage=e,this.showSnackbar=!0},copyToBuffer(){navigator.clipboard.writeText(this.uniqueLink).then(()=>{this.snackbarColor="success",this.showSnackbarMessage("Copied to clipboard")}).catch(e=>{this.snackbarColor="error",this.showSnackbarMessage("And error occurred")})}}},U={style:{width:"800px"}},E={class:"d-flex flex-col align-center"};function P(e,o,r,Y,a,d){const g=n("CustomSnackbar"),v=n("Link"),m=n("v-icon"),l=n("v-btn"),b=n("v-spacer"),y=n("v-toolbar"),w=n("v-text-field"),C=n("v-divider"),x=n("v-card-item"),p=n("v-card"),S=n("v-list-subheader"),L=n("v-list-item-title"),M=n("v-list-item"),H=n("v-list"),O=n("v-col"),q=n("v-row"),T=n("v-container"),V=n("v-app");return u(),h(V,{"data-app":""},{default:s(()=>[t(g,{visible:a.showSnackbar,message:a.snackbarMessage,"snackbar-color":a.snackbarColor,onClose:o[0]||(o[0]=i=>a.showSnackbar=!1)},null,8,["visible","message","snackbar-color"]),t(y,{dark:"",prominent:""},{default:s(()=>[r.permissions.isAdmin?(u(),h(l,{key:0,color:"blue darken-1"},{default:s(()=>[t(v,{href:e.route("user.management")},{default:s(()=>[c("User management")]),_:1},8,["href"]),t(m,null,{default:s(()=>[c("mdi-account")]),_:1})]),_:1})):k("",!0),t(b),t(l,{icon:"",href:e.route("logout")},{default:s(()=>[t(m,null,{default:s(()=>[c("mdi-export")]),_:1})]),_:1},8,["href"])]),_:1}),t(T,{class:"fill-height"},{default:s(()=>[t(q,{class:"d-flex justify-center align-center"},{default:s(()=>[t(O,{class:"d-flex justify-center align-center"},{default:s(()=>[f("div",U,[t(p,{width:"800"},{default:s(()=>[t(x,null,{default:s(()=>[a.uniqueLink?(u(),h(w,{key:0,modelValue:a.uniqueLink,"onUpdate:modelValue":o[1]||(o[1]=i=>a.uniqueLink=i),readonly:"",class:"w-100 h-25 mt-10"},null,8,["modelValue"])):k("",!0),f("div",E,[t(l,{size:"small",color:"success",class:"mb-2 w-25",onClick:d.copyToBuffer},{default:s(()=>[c("Copy ")]),_:1},8,["onClick"]),t(l,{size:"small",color:"success",class:"mb-2 w-25",onClick:d.regenerate},{default:s(()=>[c(" Regenerate ")]),_:1},8,["onClick"]),t(l,{size:"small",color:"error",class:"mb-2 w-25",onClick:d.deactivate},{default:s(()=>[c("Deactivate ")]),_:1},8,["onClick"]),t(l,{color:"success",class:"mb-2 w-25",onClick:d.feelingLucky},{default:s(()=>[c("Im feeling lucky ")]),_:1},8,["onClick"]),t(C,{class:"mt-3 mb-3"}),t(l,{color:"blue darken-1",size:"small",class:"mb-2 w-25",onClick:d.showHistory},{default:s(()=>[c(" History ")]),_:1},8,["onClick"])])]),_:1})]),_:1}),a.historyOpened?(u(),h(p,{key:0,width:"800",class:"mt-10"},{default:s(()=>[t(H,{disabled:"",height:"200"},{default:s(()=>[t(S,null,{default:s(()=>[c("HISTORY")]),_:1}),(u(!0),R(D,null,j(a.history,(i,B)=>(u(),h(M,{key:B},{prepend:s(()=>[t(m,{color:`${i.game_result==="Win"?"success":"error"}`,icon:`${i.game_result==="Win"?"mdi-check":"mdi-close"}`},null,8,["color","icon"])]),default:s(()=>[t(L,{textContent:F(i.message)},null,8,["textContent"])]),_:2},1024))),128))]),_:1})]),_:1})):k("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})}const K=z(I,[["render",P]]);export{K as default};
